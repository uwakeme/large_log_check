# 大日志文件查看器

一个专业的VSCode扩展,用于快速查看和处理大型日志文件(支持几十MB甚至GB级别的文件)。

## 功能特性

### ✨ 核心功能

1. **快速打开大文件** - 使用虚拟滚动技术,即使几十MB的日志文件也能秒开
2. **按时间删除日志** - 支持删除指定时间之前/之后的日志
3. **按行数删除日志** - 支持删除指定行之前/之后的日志
4. **实时搜索** - 快速搜索日志内容,高亮显示匹配结果
5. **智能时间识别** - 自动识别多种常见的日志时间格式

### 🎯 支持的时间格式

- `2024-01-01 12:00:00`
- `2024/01/01 12:00:00`
- `[2024-01-01 12:00:00]`
- `01-01-2024 12:00:00`
- `2024-01-01T12:00:00` (ISO 8601)

## 使用方法

### 打开日志文件

有三种方式打开日志文件:

1. **右键菜单** - 在文件资源管理器中,右键点击 .log 或 .txt 文件,选择"打开大日志文件"
2. **命令面板** - 按 `Ctrl+Shift+P` (Mac: `Cmd+Shift+P`),输入"打开大日志文件"
3. **直接拖拽** - 将日志文件拖到VSCode中,然后使用命令打开

### 按时间删除日志

1. 打开日志文件后,按 `Ctrl+Shift+P` 打开命令面板
2. 输入"按时间删除日志"
3. 选择删除方式(删除之前/删除之后)
4. 输入时间,例如: `2024-01-01 12:00:00`
5. 确认操作

⚠️ **注意**: 此操作会直接修改原文件,请务必备份重要日志!

### 按行数删除日志

1. 打开日志文件后,按 `Ctrl+Shift+P` 打开命令面板
2. 输入"按行数删除日志"
3. 选择删除方式(删除之前/删除之后)
4. 输入行号,例如: `1000`
5. 确认操作

⚠️ **注意**: 此操作会直接修改原文件,请务必备份重要日志!

### 搜索日志

1. 在日志查看器界面的搜索框中输入关键词
2. 点击"搜索"按钮或按回车
3. 匹配的日志行会被高亮显示
4. 点击"刷新"按钮可以清除搜索结果

## 开发调试

### 安装依赖

```bash
npm install
```

### 编译项目

```bash
npm run compile
```

### 开发模式(自动编译)

```bash
npm run watch
```

### 调试扩展

1. 在VSCode中打开项目
2. 按 `F5` 启动扩展开发主机
3. 在新窗口中测试扩展功能

### 打包扩展

```bash
npm install -g @vscode/vsce
vsce package
```

## 项目结构

```
big_log_check/
├── src/
│   ├── extension.ts          # 扩展主入口
│   ├── logViewerPanel.ts     # 日志查看器面板
│   ├── logProcessor.ts       # 日志处理核心逻辑
│   └── webview.html          # WebView界面
├── out/                       # 编译输出
├── package.json              # 项目配置
├── tsconfig.json             # TypeScript配置
└── README.md                 # 使用说明
```

## 技术实现

- **虚拟滚动**: 只渲染可见区域的日志行,大幅提升性能
- **流式读取**: 使用Node.js的readline模块,按行读取文件,避免内存溢出
- **增量加载**: 初始加载1000行,滚动时动态加载更多内容
- **正则匹配**: 灵活的时间戳提取和搜索功能

## 性能表现

- ✅ 50MB+ 日志文件秒开
- ✅ 支持百万行级别的日志文件
- ✅ 搜索响应时间 < 2秒(取决于文件大小)
- ✅ 滚动流畅,无卡顿

## 注意事项

1. **备份重要文件** - 删除操作会直接修改原文件,建议先备份
2. **时间格式** - 如果日志没有标准时间戳,按时间删除功能可能无法正常工作
3. **内存占用** - 虽然使用了流式读取,但搜索功能需要扫描整个文件,超大文件可能需要一些时间

## 后续优化计划

- [ ] 支持更多日志时间格式
- [ ] 添加日志级别过滤(ERROR, WARN, INFO等)
- [ ] 支持正则表达式搜索
- [ ] 添加书签功能
- [ ] 支持日志导出
- [ ] 性能优化:索引文件,加速搜索

## License

MIT
