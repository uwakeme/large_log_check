# æ³¨é‡ŠåŠŸèƒ½

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [src/webview.html](file://src/webview.html)
- [src/extension.ts](file://src/extension.ts)
- [src/logViewerPanel.ts](file://src/logViewerPanel.ts)
- [package.json](file://package.json)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„æ¦‚è§ˆ](#é¡¹ç›®ç»“æ„æ¦‚è§ˆ)
3. [æ ¸å¿ƒç»„ä»¶åˆ†æ](#æ ¸å¿ƒç»„ä»¶åˆ†æ)
4. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
5. [è¯¦ç»†åŠŸèƒ½åˆ†æ](#è¯¦ç»†åŠŸèƒ½åˆ†æ)
6. [ä¾èµ–å…³ç³»åˆ†æ](#ä¾èµ–å…³ç³»åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)

## ç®€ä»‹

large_log_checkæ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¤§å‹æ—¥å¿—æ–‡ä»¶æŸ¥çœ‹å™¨æ‰©å±•ï¼Œæä¾›äº†å¼ºå¤§çš„æ³¨é‡ŠåŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·ä¸ºç‰¹å®šæ—¥å¿—è¡Œæ·»åŠ ã€ç¼–è¾‘å’Œåˆ é™¤æ³¨é‡Šã€‚è¯¥åŠŸèƒ½é€šè¿‡webview.htmlä¸­çš„UIç»„ä»¶å’ŒJavaScripté€»è¾‘å®ç°ï¼Œæ”¯æŒæœ¬åœ°æŒä¹…åŒ–å­˜å‚¨ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„äº¤äº’ä½“éªŒã€‚

æ³¨é‡ŠåŠŸèƒ½çš„æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š
- **å¯è§†åŒ–å¾½ç« **ï¼šåœ¨æ—¥å¿—è¡Œå³ä¾§æ˜¾ç¤º"ğŸ“ æœ‰æ³¨é‡Š"å¾½ç« 
- **å¼¹çª—ç¼–è¾‘**ï¼šé€šè¿‡æ¨¡æ€å¯¹è¯æ¡†è¿›è¡Œæ³¨é‡Šçš„æ·»åŠ å’Œç¼–è¾‘
- **æœ¬åœ°å­˜å‚¨**ï¼šä½¿ç”¨localStorageå®ç°æ³¨é‡Šçš„æŒä¹…åŒ–
- **å³é”®èœå•é›†æˆ**ï¼šé€šè¿‡å³é”®èœå•å¿«é€Ÿæ·»åŠ æˆ–ç¼–è¾‘æ³¨é‡Š
- **åˆ—è¡¨ç®¡ç†**ï¼šæä¾›ä¸“é—¨çš„æ³¨é‡Šåˆ—è¡¨ç•Œé¢è¿›è¡Œæ‰¹é‡ç®¡ç†

## é¡¹ç›®ç»“æ„æ¦‚è§ˆ

è¯¥é¡¹ç›®é‡‡ç”¨å…¸å‹çš„VS Codeæ‰©å±•æ¶æ„ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ–‡ä»¶ï¼š

```mermaid
graph TB
subgraph "æ‰©å±•å…¥å£"
A[extension.ts]
end
subgraph "é¢æ¿æ§åˆ¶å™¨"
B[logViewerPanel.ts]
end
subgraph "Webè§†å›¾"
C[webview.html]
end
A --> B
B --> C
subgraph "æ³¨é‡ŠåŠŸèƒ½æ¨¡å—"
D[comment-badge å¾½ç« æ ·å¼]
E[log-comment æ³¨é‡ŠåŒºåŸŸ]
F[localStorage æŒä¹…åŒ–]
G[å³é”®èœå•é›†æˆ]
end
C --> D
C --> E
C --> F
C --> G
```

**å›¾è¡¨æ¥æº**
- [src/extension.ts](file://src/extension.ts#L1-L116)
- [src/logViewerPanel.ts](file://src/logViewerPanel.ts#L1-L510)
- [src/webview.html](file://src/webview.html#L1-L4153)

**ç« èŠ‚æ¥æº**
- [src/extension.ts](file://src/extension.ts#L1-L116)
- [src/logViewerPanel.ts](file://src/logViewerPanel.ts#L1-L510)
- [src/webview.html](file://src/webview.html#L1-L4153)

## æ ¸å¿ƒç»„ä»¶åˆ†æ

### æ³¨é‡Šæ•°æ®ç»“æ„

æ³¨é‡ŠåŠŸèƒ½ä½¿ç”¨JavaScript Mapæ•°æ®ç»“æ„æ¥ç®¡ç†æ³¨é‡Šæ•°æ®ï¼š

```javascript
// æ³¨é‡Šé›†åˆï¼Œkeyä¸ºè¡Œå·ï¼Œvalueä¸ºæ³¨é‡Šå†…å®¹
let comments = new Map();
```

è¿™ç§æ•°æ®ç»“æ„æä¾›äº†é«˜æ•ˆçš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œç‰¹åˆ«é€‚åˆæŒ‰è¡Œå·å¿«é€Ÿè®¿é—®æ³¨é‡Šã€‚

### è§†è§‰æ ·å¼è®¾è®¡

æ³¨é‡ŠåŠŸèƒ½é‡‡ç”¨äº†ä¸¤ç§ä¸»è¦çš„è§†è§‰å…ƒç´ ï¼š

#### comment-badge å°å¾½ç« æ ·å¼
```css
.comment-badge {
    display: inline-block;
    background-color: #10b981;
    color: #fff;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 3px;
    margin-left: 5px;
    cursor: pointer;
    user-select: none;
}

.comment-badge:hover {
    background-color: #059669;
}
```

#### log-comment å—çº§æ³¨é‡ŠåŒºåŸŸ
```css
.log-comment {
    display: block;
    background-color: rgba(16, 185, 129, 0.1);
    border-left: 3px solid #10b981;
    padding: 5px 10px;
    margin-top: 3px;
    font-size: 11px;
    font-style: italic;
    color: var(--vscode-descriptionForeground);
}
```

**ç« èŠ‚æ¥æº**
- [src/webview.html](file://src/webview.html#L502-L530)

## æ¶æ„æ¦‚è§ˆ

æ³¨é‡ŠåŠŸèƒ½çš„æ•´ä½“æ¶æ„éµå¾ªMVVMæ¨¡å¼ï¼Œé€šè¿‡äº‹ä»¶é©±åŠ¨çš„æ–¹å¼å®ç°ç”¨æˆ·äº¤äº’ï¼š

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant UI as Webè§†å›¾ç•Œé¢
participant JS as JavaScripté€»è¾‘
participant Storage as LocalStorage
User->>UI : å³é”®ç‚¹å‡»æ—¥å¿—è¡Œ
UI->>JS : showContextMenu()
JS->>UI : æ˜¾ç¤ºå³é”®èœå•
User->>UI : é€‰æ‹©"æ·»åŠ æ³¨é‡Š"
UI->>JS : addOrEditComment()
JS->>UI : æ˜¾ç¤ºæ³¨é‡Šè¾“å…¥å¼¹çª—
User->>UI : è¾“å…¥æ³¨é‡Šå†…å®¹
User->>UI : ç¡®è®¤ä¿å­˜
UI->>JS : confirmCommentInput()
JS->>JS : comments.set(lineNumber, comment)
JS->>Storage : ä¿å­˜åˆ°localStorage
JS->>UI : renderLines()
UI->>User : æ˜¾ç¤ºæ›´æ–°åçš„æ—¥å¿—è¡Œ
```

**å›¾è¡¨æ¥æº**
- [src/webview.html](file://src/webview.html#L2256-L2315)
- [src/webview.html](file://src/webview.html#L2475-L2506)

## è¯¦ç»†åŠŸèƒ½åˆ†æ

### æ³¨é‡Šæ·»åŠ ä¸ç¼–è¾‘æµç¨‹

#### 1. å³é”®èœå•è§¦å‘
ç”¨æˆ·å¯ä»¥é€šè¿‡å³é”®ç‚¹å‡»æ—¥å¿—è¡Œæ¥è§¦å‘æ³¨é‡Šæ·»åŠ æµç¨‹ï¼š

```javascript
// å³é”®èœå•ä¸­çš„æ³¨é‡Šé€‰é¡¹
const commentItem = document.createElement('div');
commentItem.className = 'context-menu-item';
const hasComment = comments.has(lineNumber);
commentItem.innerHTML = hasComment
    ? '<span>âœï¸</span><span>ç¼–è¾‘æ³¨é‡Š</span>'
    : '<span>ğŸ“</span><span>æ·»åŠ æ³¨é‡Š</span>';
commentItem.onclick = (e) => {
    e.stopPropagation();
    e.preventDefault();
    closeContextMenu();
    setTimeout(() => {
        addOrEditComment(lineNumber);
    }, 100);
};
```

#### 2. æ³¨é‡Šè¾“å…¥å¼¹çª—
å½“ç”¨æˆ·é€‰æ‹©æ·»åŠ æˆ–ç¼–è¾‘æ³¨é‡Šæ—¶ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºä¸€ä¸ªæ¨¡æ€å¯¹è¯æ¡†ï¼š

```javascript
function addOrEditComment(lineNumber) {
    currentCommentLineNumber = lineNumber;
    const existingComment = comments.get(lineNumber) || '';
    const line = allLines.find(l => l.lineNumber === lineNumber);
    const content = line ? (line.content || line) : '';
    const preview = content.substring(0, 100) + (content.length > 100 ? '...' : '');
    
    // è®¾ç½®å¼¹çª—å†…å®¹
    document.getElementById('commentInputTitle').textContent = existingComment ? 'âœï¸ ç¼–è¾‘æ³¨é‡Š' : 'ğŸ“ æ·»åŠ æ³¨é‡Š';
    document.getElementById('commentInputLineNumber').textContent = lineNumber;
    document.getElementById('commentInputPreview').textContent = content;
    document.getElementById('commentInputText').value = existingComment;
    
    // æ˜¾ç¤ºå¼¹çª—
    document.getElementById('commentInputModal').style.display = 'block';
}
```

#### 3. æ³¨é‡Šç¡®è®¤ä¸ä¿å­˜
ç”¨æˆ·è¾“å…¥æ³¨é‡Šå†…å®¹åï¼Œç³»ç»Ÿä¼šè¿›è¡ŒéªŒè¯å¹¶ä¿å­˜ï¼š

```javascript
function confirmCommentInput() {
    if (currentCommentLineNumber === null) {
        return;
    }
    
    const lineNumber = currentCommentLineNumber;
    const commentText = document.getElementById('commentInputText').value;
    const existingComment = comments.get(lineNumber) || '';
    
    if (commentText.trim()) {
        comments.set(lineNumber, commentText.trim());
        showToast(`âœ… æ³¨é‡Šå·²${existingComment ? 'æ›´æ–°' : 'æ·»åŠ '}`);
    } else if (existingComment) {
        comments.delete(lineNumber);
        showToast('âŒ æ³¨é‡Šå·²åˆ é™¤');
    }
    
    renderLines();
    closeCommentInputModal();
}
```

### æ³¨é‡Šæ˜¾ç¤ºç­–ç•¥

#### 1. æ—¥å¿—è¡Œå†…æ˜¾ç¤º
åœ¨æ—¥å¿—è¡Œå³ä¾§æ˜¾ç¤ºæ³¨é‡Šå¾½ç« ï¼Œå½“é¼ æ ‡æ‚¬åœæ—¶æä¾›ç¼–è¾‘åŠŸèƒ½ï¼š

```javascript
// å¦‚æœæœ‰æ³¨é‡Šï¼Œæ·»åŠ æ³¨é‡Šå¾½ç« 
if (comments.has(actualLineNumber)) {
    highlightedContent += `<span class="comment-badge" onclick="event.stopPropagation(); editComment(${actualLineNumber})" title="ç‚¹å‡»ç¼–è¾‘æ³¨é‡Š">ğŸ“ æœ‰æ³¨é‡Š</span>`;
}
```

#### 2. æ—¥å¿—è¡Œä¸‹æ–¹æ˜¾ç¤º
åœ¨æ—¥å¿—è¡Œä¸‹æ–¹æ˜¾ç¤ºå®Œæ•´çš„æ³¨é‡Šå†…å®¹ï¼š

```javascript
// å¦‚æœæœ‰æ³¨é‡Šï¼Œåœ¨ä¸‹æ–¹æ˜¾ç¤ºæ³¨é‡Šå†…å®¹
if (comments.has(actualLineNumber)) {
    const commentDiv = document.createElement('div');
    commentDiv.className = 'log-comment';
    commentDiv.textContent = 'ğŸ“ ' + comments.get(actualLineNumber);
    lineDiv.appendChild(commentDiv);
}
```

### æ³¨é‡Šåˆ—è¡¨ç®¡ç†

#### æ³¨é‡Šåˆ—è¡¨ç•Œé¢
ç³»ç»Ÿæä¾›äº†ä¸“é—¨çš„æ³¨é‡Šåˆ—è¡¨ç•Œé¢ï¼Œå…è®¸ç”¨æˆ·æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰æ³¨é‡Šï¼š

```javascript
function showCommentsModal() {
    const modal = document.getElementById('commentsModal');
    const list = document.getElementById('commentsList');
    
    if (comments.size === 0) {
        list.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--vscode-descriptionForeground);">æš‚æ— æ³¨é‡Š<br>å³é”®ç‚¹å‡»æ—¥å¿—è¡Œå¯æ·»åŠ æ³¨é‡Š</div>';
    } else {
        // å°†Mapè½¬ä¸ºæ•°ç»„å¹¶æŒ‰è¡Œå·æ’åº
        const commentArray = Array.from(comments.entries()).sort((a, b) => a[0] - b[0]);
        list.innerHTML = commentArray.map(([lineNum, comment]) => {
            const line = allLines.find(l => l.lineNumber === lineNum);
            const content = line ? (line.content || line) : 'ï¼ˆå·²ä¸å­˜åœ¨ï¼‰';
            const preview = content.substring(0, 80) + (content.length > 80 ? '...' : '');
            
            return `
                <div style="padding: 12px; margin-bottom: 10px; background-color: var(--vscode-editorWidget-background); border-radius: 5px; border-left: 3px solid #10b981;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="font-weight: bold; color: var(--vscode-textLink-foreground); cursor: pointer;" onclick="jumpToComment(${lineNum})">ğŸ“ è¡Œ ${lineNum}</span>
                        <div style="display: flex; gap: 5px;">
                            <button onclick="editComment(${lineNum})" style="padding: 2px 8px; font-size: 11px; background-color: #0e7490;">ç¼–è¾‘</button>
                            <button onclick="deleteCommentFromList(${lineNum})" style="padding: 2px 8px; font-size: 11px; background-color: #dc2626;">åˆ é™¤</button>
                        </div>
                    </div>
                    <div style="font-size: 11px; color: var(--vscode-descriptionForeground); font-family: 'Consolas', monospace; margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                        ${escapeHtml(preview)}
                    </div>
                    <div style="background-color: rgba(16, 185, 129, 0.1); padding: 8px; border-radius: 3px; font-size: 12px; font-style: italic; color: var(--vscode-editor-foreground);">
                        ${escapeHtml(comment)}
                    </div>
                </div>
            `;
        }).join('');
    }
    
    modal.style.display = 'block';
}
```

### æœ¬åœ°æŒä¹…åŒ–æœºåˆ¶

#### å­˜å‚¨ç­–ç•¥
æ³¨é‡Šæ•°æ®ä½¿ç”¨JavaScript Mapç»“æ„åœ¨å†…å­˜ä¸­ç®¡ç†ï¼ŒåŒæ—¶é€šè¿‡localStorageå®ç°æŒä¹…åŒ–ï¼š

```javascript
// æ³¨é‡Šé›†åˆï¼Œkeyä¸ºè¡Œå·ï¼Œvalueä¸ºæ³¨é‡Šå†…å®¹
let comments = new Map();

// ä¿å­˜æ³¨é‡Šåˆ°localStorage
function saveCommentsToStorage() {
    try {
        localStorage.setItem('comments', JSON.stringify(Array.from(comments.entries())));
    } catch (e) {
        console.error('ä¿å­˜æ³¨é‡Šå¤±è´¥:', e);
    }
}

// ä»localStorageåŠ è½½æ³¨é‡Š
function loadCommentsFromStorage() {
    try {
        const saved = localStorage.getItem('comments');
        if (saved) {
            comments = new Map(JSON.parse(saved));
        }
    } catch (e) {
        console.error('åŠ è½½æ³¨é‡Šå¤±è´¥:', e);
    }
}
```

#### æ•°æ®æ ¼å¼
æ³¨é‡Šæ•°æ®ä»¥JSONæ ¼å¼å­˜å‚¨ï¼Œç»“æ„å¦‚ä¸‹ï¼š
```json
[
    [123, "è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„é”™è¯¯æ—¥å¿—"],
    [456, "éœ€è¦è¿›ä¸€æ­¥åˆ†æçš„å¼‚å¸¸æƒ…å†µ"],
    [789, "é…ç½®ç›¸å…³çš„é‡è¦ä¿¡æ¯"]
]
```

**ç« èŠ‚æ¥æº**
- [src/webview.html](file://src/webview.html#L2256-L2365)
- [src/webview.html](file://src/webview.html#L1767-L1814)

## ä¾èµ–å…³ç³»åˆ†æ

### ç»„ä»¶é—´ä¾èµ–å…³ç³»

```mermaid
graph TD
A[å³é”®èœå•] --> B[addOrEditCommentå‡½æ•°]
B --> C[æ³¨é‡Šè¾“å…¥å¼¹çª—]
C --> D[confirmCommentInputå‡½æ•°]
D --> E[comments Map]
E --> F[localStorage]
E --> G[renderLineså‡½æ•°]
G --> H[æ—¥å¿—è¡Œæ¸²æŸ“]
H --> I[comment-badgeå¾½ç« ]
H --> J[log-commentåŒºåŸŸ]
K[æ³¨é‡Šåˆ—è¡¨ç•Œé¢] --> L[showCommentsModalå‡½æ•°]
L --> M[comments Map]
M --> N[æ³¨é‡Šåˆ—è¡¨HTML]
```

**å›¾è¡¨æ¥æº**
- [src/webview.html](file://src/webview.html#L2475-L2506)
- [src/webview.html](file://src/webview.html#L2256-L2315)
- [src/webview.html](file://src/webview.html#L1767-L1814)

### å¤–éƒ¨ä¾èµ–

æ³¨é‡ŠåŠŸèƒ½ä¾èµ–ä»¥ä¸‹å¤–éƒ¨èµ„æºï¼š
- **VS Code API**ï¼šé€šè¿‡`acquireVsCodeApi()`è·å–VS Codeé€šä¿¡æ¥å£
- **localStorage**ï¼šæµè§ˆå™¨æä¾›çš„æœ¬åœ°å­˜å‚¨æœºåˆ¶
- **DOM API**ï¼šç”¨äºåŠ¨æ€åˆ›å»ºå’Œæ“ä½œHTMLå…ƒç´ 

**ç« èŠ‚æ¥æº**
- [src/webview.html](file://src/webview.html#L1164-L1166)
- [src/webview.html](file://src/webview.html#L1171)

## æ€§èƒ½è€ƒè™‘

### å†…å­˜ç®¡ç†
- **Mapæ•°æ®ç»“æ„**ï¼šä½¿ç”¨Mapè€ŒéObjectæ¥å­˜å‚¨æ³¨é‡Šï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡
- **å»¶è¿Ÿæ¸²æŸ“**ï¼šæ³¨é‡Šåªåœ¨éœ€è¦æ—¶æ‰æ¸²æŸ“åˆ°DOMä¸­
- **åƒåœ¾å›æ”¶**ï¼šåŠæ—¶æ¸…ç†ä¸å†ä½¿ç”¨çš„æ³¨é‡Šæ•°æ®

### æ¸²æŸ“ä¼˜åŒ–
- **æ¡ä»¶æ¸²æŸ“**ï¼šåªæœ‰å­˜åœ¨æ³¨é‡Šçš„æ—¥å¿—è¡Œæ‰ä¼šæ˜¾ç¤ºæ³¨é‡ŠåŒºåŸŸ
- **äº‹ä»¶å§”æ‰˜**ï¼šä½¿ç”¨äº‹ä»¶å†’æ³¡å‡å°‘äº‹ä»¶ç›‘å¬å™¨æ•°é‡
- **é˜²æŠ–å¤„ç†**ï¼šå¯¹é¢‘ç¹çš„DOMæ“ä½œè¿›è¡ŒèŠ‚æµå¤„ç†

### å­˜å‚¨ä¼˜åŒ–
- **å¢é‡ä¿å­˜**ï¼šåªä¿å­˜å˜æ›´çš„æ³¨é‡Šæ•°æ®
- **æ•°æ®å‹ç¼©**ï¼šä½¿ç”¨JSONåºåˆ—åŒ–å‡å°‘å­˜å‚¨ç©ºé—´
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸æ•è·æœºåˆ¶é˜²æ­¢å­˜å‚¨å¤±è´¥å½±å“åº”ç”¨

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æ³¨é‡Šæ— æ³•ä¿å­˜
**ç—‡çŠ¶**ï¼šæ·»åŠ æ³¨é‡Šååˆ·æ–°é¡µé¢ä¸¢å¤±
**åŸå› **ï¼šlocalStorageå­˜å‚¨å¤±è´¥æˆ–æƒé™é—®é¢˜
**è§£å†³æ–¹æ³•**ï¼š
- æ£€æŸ¥æµè§ˆå™¨éšç§è®¾ç½®
- ç¡®ä¿ç½‘ç«™æœ‰å†™å…¥localStorageçš„æƒé™
- æ¸…ç†æµè§ˆå™¨ç¼“å­˜

#### 2. æ³¨é‡Šå¾½ç« ä¸æ˜¾ç¤º
**ç—‡çŠ¶**ï¼šæ—¥å¿—è¡Œå³ä¾§æ²¡æœ‰"ğŸ“ æœ‰æ³¨é‡Š"å¾½ç« 
**åŸå› **ï¼š
- æ³¨é‡Šæ•°æ®æœªæ­£ç¡®åŠ è½½
- CSSæ ·å¼è¢«è¦†ç›–
- JavaScriptæ‰§è¡Œé”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- éªŒè¯comments Mapä¸­æ˜¯å¦æœ‰å¯¹åº”è¡Œå·çš„æ³¨é‡Š
- ç¡®è®¤CSSæ ·å¼æ˜¯å¦æ­£ç¡®åŠ è½½

#### 3. æ³¨é‡Šåˆ—è¡¨ä¸ºç©º
**ç—‡çŠ¶**ï¼šç‚¹å‡»"ğŸ“ æ³¨é‡Š"æŒ‰é’®æ˜¾ç¤º"æš‚æ— æ³¨é‡Š"
**åŸå› **ï¼š
- æ³¨é‡Šæ•°æ®ä¸¢å¤±
- æ•°æ®æ ¼å¼é”™è¯¯
- é¡µé¢æœªæ­£ç¡®åŠ è½½

**è§£å†³æ–¹æ³•**ï¼š
- æ£€æŸ¥localStorageä¸­çš„commentsæ•°æ®
- éªŒè¯æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
- é‡æ–°åŠ è½½é¡µé¢

**ç« èŠ‚æ¥æº**
- [src/webview.html](file://src/webview.html#L2290-L2315)

## ç»“è®º

large_log_checkçš„æ³¨é‡ŠåŠŸèƒ½æ˜¯ä¸€ä¸ªè®¾è®¡ç²¾è‰¯ã€åŠŸèƒ½å®Œå¤‡çš„æ—¥å¿—åˆ†æè¾…åŠ©å·¥å…·ã€‚å®ƒé€šè¿‡ä»¥ä¸‹ç‰¹ç‚¹å®ç°äº†ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒï¼š

### ä¸»è¦ä¼˜åŠ¿
1. **ç›´è§‚çš„è§†è§‰åé¦ˆ**ï¼šé€šè¿‡comment-badgeå¾½ç« å’Œlog-commentåŒºåŸŸæä¾›æ¸…æ™°çš„æ³¨é‡Šæ ‡è¯†
2. **ä¾¿æ·çš„æ“ä½œæµç¨‹**ï¼šå³é”®èœå•é›†æˆä½¿å¾—æ·»åŠ å’Œç¼–è¾‘æ³¨é‡Šå˜å¾—ç®€å•å¿«æ·
3. **å¯é çš„æŒä¹…åŒ–**ï¼šåŸºäºlocalStorageçš„æœ¬åœ°å­˜å‚¨ç¡®ä¿æ³¨é‡Šæ•°æ®çš„å®‰å…¨æ€§
4. **çµæ´»çš„ç®¡ç†ç•Œé¢**ï¼šæ³¨é‡Šåˆ—è¡¨æä¾›äº†æ‰¹é‡ç®¡ç†å’Œå¿«é€Ÿè·³è½¬åŠŸèƒ½
5. **è‰¯å¥½çš„æ€§èƒ½è¡¨ç°**ï¼šä¼˜åŒ–çš„æ•°æ®ç»“æ„å’Œæ¸²æŸ“ç­–ç•¥ä¿è¯äº†æµç•…çš„ç”¨æˆ·ä½“éªŒ

### åº”ç”¨åœºæ™¯
- **å›¢é˜Ÿåä½œåˆ†æ**ï¼šå¤šä¸ªå¼€å‘è€…å¯ä»¥åœ¨åŒä¸€ä»½æ—¥å¿—æ–‡ä»¶ä¸Šæ·»åŠ å„è‡ªçš„åˆ†ææ³¨é‡Š
- **é—®é¢˜æ’æŸ¥**ï¼šä¸ºå…³é”®æ—¥å¿—è¡Œæ·»åŠ ä¸Šä¸‹æ–‡è¯´æ˜ï¼Œä¾¿äºåç»­è·Ÿè¿›
- **çŸ¥è¯†ç§¯ç´¯**ï¼šé•¿æœŸç»´æŠ¤çš„é¡¹ç›®ä¸­ï¼Œæ³¨é‡Šå¯ä»¥ä½œä¸ºç»éªŒæ€»ç»“çš„è½½ä½“
- **æ–‡æ¡£è¡¥å……**ï¼šä¸ºå¤æ‚çš„æ—¥å¿—æ¨¡å¼æ·»åŠ è§£é‡Šæ€§è¯´æ˜

è¯¥æ³¨é‡ŠåŠŸèƒ½ä¸ä»…æå‡äº†æ—¥å¿—åˆ†æçš„æ•ˆç‡ï¼Œè¿˜ä¸ºå›¢é˜Ÿåä½œå’ŒçŸ¥è¯†ç®¡ç†æä¾›äº†æœ‰åŠ›æ”¯æŒï¼Œæ˜¯large_log_checkæ‰©å±•çš„é‡è¦ç‰¹è‰²åŠŸèƒ½ä¹‹ä¸€ã€‚